enum EventStatus {
  DRAFT
  PUBLISHED
  CANCELLED
}

enum Category {
  MUSIC
  SPORT
  THEATERS_AND_ART
  OTHER
}

model Event {
  id           String         @id @default(uuid())
  name         String
  description  String
  startDate    DateTime
  endDate      DateTime
  thumbnailUrl String
  location     EventLocation?
  config       EventConfig?
  organizer    Organizer?
  roles        EventRole[]
  categories   Category[]
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt

  @@map("events")
}

model EventConfig {
  id                  String      @id @default(uuid())
  eventId             String      @unique
  ticketSaleStartDate DateTime
  ticketSaleEndDate   DateTime
  isFree              Boolean
  maxAttendees        Int
  isPublic            Boolean     @default(true)
  requiresApproval    Boolean     @default(false)
  allowWaitRoom       Boolean     @default(true)
  isNewTrending       Boolean     @default(false)
  status              EventStatus @default(DRAFT)
  event               Event       @relation(fields: [eventId], references: [id])
  createdAt           DateTime    @default(now())
  updatedAt           DateTime    @updatedAt

  @@map("event_configs")
}

model EventLocation {
  id        String   @id @default(uuid())
  eventId   String   @unique
  venue     String
  street    String
  city      String
  district  String?
  ward      String?
  country   String
  event     Event    @relation(fields: [eventId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("event_locations")
}

model EventRole {
  id        String        @id @default(uuid())
  userId    String
  eventId   String
  role      EventRoleType
  event     Event         @relation(fields: [eventId], references: [id], onDelete: Cascade)
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt

  @@unique([userId, eventId])
  @@map("event_roles")
}

enum EventRoleType {
  ADMIN
  EDITOR
  VIEWER

  @@map("event_role_types")
}
